<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Grocery Manager</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: white;
            color: #4facfe;
            border-bottom: 3px solid #4facfe;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .inventory-grid {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }

        .item-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4facfe;
        }

        .item-card.low-stock {
            border-left-color: #ff6b6b;
            background: linear-gradient(135deg, #fff5f5 0%, #white 100%);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .item-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
        }

        .stock-level {
            font-size: 2rem;
            font-weight: 900;
            color: #4facfe;
        }

        .low-stock .stock-level {
            color: #ff6b6b;
        }

        .item-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .detail {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 2px;
        }

        .detail-value {
            font-weight: 600;
            color: #333;
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: #4facfe;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }

        .alerts-panel {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .alert-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .deals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .deal-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #28a745;
            position: relative;
        }

        .deal-card.user-deal {
            border-top-color: #007bff;
        }

        .deal-card.expired {
            opacity: 0.6;
            border-top-color: #6c757d;
        }

        .deal-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .deal-badge.expired {
            background: #6c757d;
        }

        .store-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #28a745;
            margin-bottom: 10px;
        }

        .deal-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: #333;
            margin-bottom: 5px;
        }

        .original-price {
            text-decoration: line-through;
            color: #999;
            margin-left: 10px;
        }

        .savings {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .success-message {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
        }

        .error-message {
            background: #dc3545;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõí Smart Grocery Manager</h1>
            <p>Track inventory, get alerts, and find the best deals!</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('inventory')">üì¶ Inventory</button>
            <button class="tab" onclick="showTab('add-item')">‚ûï Add Item</button>
            <button class="tab" onclick="showTab('alerts')">üö® Alerts</button>
            <button class="tab" onclick="showTab('deals')">üí∞ Find Deals</button>
            <button class="tab" onclick="showTab('add-deal')">üè™ Add Deal</button>
        </div>

        <div class="content">
            <!-- Inventory Section -->
            <div id="inventory" class="section active">
                <h2>Current Inventory</h2>
                <div id="inventory-list" class="inventory-grid">
                    <p style="text-align: center; color: #666; padding: 40px;">No items yet. Click "Add Item" to get started!</p>
                </div>
            </div>

            <!-- Add Item Section -->
            <div id="add-item" class="section">
                <h2>Add New Grocery Item</h2>
                <div id="message-area"></div>
                
                <div class="form-row">
                    <div>
                        <label>Item Name *</label>
                        <input type="text" id="item-name" placeholder="e.g. Milk">
                    </div>
                    <div>
                        <label>Current Stock *</label>
                        <input type="number" id="current-stock" min="0" placeholder="e.g. 2">
                    </div>
                    <div>
                        <label>Alert Threshold *</label>
                        <input type="number" id="threshold" min="1" placeholder="e.g. 1">
                    </div>
                </div>
                
                <div class="form-row">
                    <div>
                        <label>Unit *</label>
                        <select id="unit">
                            <option value="">Select unit</option>
                            <option value="pieces">Pieces</option>
                            <option value="kg">Kilograms</option>
                            <option value="lbs">Pounds</option>
                            <option value="liters">Liters</option>
                            <option value="bottles">Bottles</option>
                            <option value="cans">Cans</option>
                            <option value="boxes">Boxes</option>
                        </select>
                    </div>
                    <div>
                        <label>Category *</label>
                        <select id="category">
                            <option value="">Select category</option>
                            <option value="fruits">Fruits & Vegetables</option>
                            <option value="dairy">Dairy</option>
                            <option value="meat">Meat & Poultry</option>
                            <option value="grains">Grains & Cereals</option>
                            <option value="beverages">Beverages</option>
                            <option value="snacks">Snacks</option>
                            <option value="cleaning">Cleaning Supplies</option>
                            <option value="personal">Personal Care</option>
                        </select>
                    </div>
                    <div>
                        <label>Expiry Date (Optional)</label>
                        <input type="date" id="expiry-date">
                    </div>
                </div>
                
                <button class="btn" onclick="addNewItem()">Add Item to Inventory</button>
            </div>

            <!-- Alerts Section -->
            <div id="alerts" class="section">
                <h2>Low Stock Alerts</h2>
                <div id="alerts-list">
                    <div class="alerts-panel">
                        <h3>‚úÖ All items are well stocked!</h3>
                    </div>
                </div>
            </div>

            <!-- Deals Section -->
            <div id="deals" class="section">
                <h2>Find Best Deals</h2>
                <div style="margin-bottom: 20px;">
                    <label>Search for item deals:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="search-item" placeholder="Enter item name..." style="flex: 1;">
                        <button class="btn" onclick="findDeals()">Search Deals</button>
                        <button class="btn" onclick="showAllDeals()">Show All Deals</button>
                    </div>
                </div>
                <div id="deals-list" class="deals-grid">
                    <p style="text-align: center; color: #666; padding: 40px;">Enter an item name above to search for deals, or click "Show All Deals"!</p>
                </div>
            </div>

            <!-- Add Deal Section -->
            <div id="add-deal" class="section">
                <h2>Add New Deal</h2>
                <div id="deal-message-area"></div>
                
                <div class="form-row">
                    <div>
                        <label>Item Name *</label>
                        <input type="text" id="deal-item-name" placeholder="e.g. Milk">
                    </div>
                    <div>
                        <label>Store Name *</label>
                        <input type="text" id="deal-store" placeholder="e.g. SuperMart">
                    </div>
                    <div>
                        <label>Sale Price *</label>
                        <input type="number" id="deal-price" min="0" step="0.01" placeholder="e.g. 3.49">
                    </div>
                </div>
                
                <div class="form-row">
                    <div>
                        <label>Original Price *</label>
                        <input type="number" id="deal-original-price" min="0" step="0.01" placeholder="e.g. 4.99">
                    </div>
                    <div>
                        <label>Deal Valid Until (Optional)</label>
                        <input type="date" id="deal-expiry">
                    </div>
                    <div>
                        <label>Deal Description (Optional)</label>
                        <input type="text" id="deal-description" placeholder="e.g. Buy 2 get 1 free">
                    </div>
                </div>
                
                <button class="btn" onclick="addNewDeal()">Add Deal</button>
                
                <div style="margin-top: 30px;">
                    <h3>Current Deals</h3>
                    <div id="current-deals-list" class="deals-grid" style="margin-top: 15px;">
                        <p style="text-align: center; color: #666; padding: 20px;">No deals added yet!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple global variables
        let items = [];
        let deals = [];
        let nextId = 1;
        let nextDealId = 1;

        // Show/hide tabs
        function showTab(tabName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Show message to user (for both items and deals)
        function showMessage(text, isError = false, targetId = 'message-area') {
            const messageArea = document.getElementById(targetId);
            messageArea.innerHTML = `<div class="${isError ? 'error-message' : 'success-message'}">${text}</div>`;
            
            // Clear message after 3 seconds
            setTimeout(() => {
                messageArea.innerHTML = '';
            }, 3000);
        }

        // Add new item
        function addNewItem() {
            console.log('Add button clicked!');
            
            // Get values
            const name = document.getElementById('item-name').value.trim();
            const stock = document.getElementById('current-stock').value;
            const threshold = document.getElementById('threshold').value;
            const unit = document.getElementById('unit').value;
            const category = document.getElementById('category').value;
            const expiry = document.getElementById('expiry-date').value;
            
            console.log('Values:', {name, stock, threshold, unit, category});
            
            // Simple validation
            if (!name) {
                showMessage('Please enter an item name!', true);
                return;
            }
            
            if (!stock || stock < 0) {
                showMessage('Please enter a valid stock amount!', true);
                return;
            }
            
            if (!threshold || threshold < 1) {
                showMessage('Please enter a valid threshold!', true);
                return;
            }
            
            if (!unit) {
                showMessage('Please select a unit!', true);
                return;
            }
            
            if (!category) {
                showMessage('Please select a category!', true);
                return;
            }

            // Create item object
            const newItem = {
                id: nextId++,
                name: name,
                stock: parseInt(stock),
                threshold: parseInt(threshold),
                unit: unit,
                category: category,
                expiry: expiry,
                lastUpdated: new Date().toISOString()
            };

            // Add to array
            items.push(newItem);
            console.log('Item added! Total items:', items.length);

            // Clear form
            document.getElementById('item-name').value = '';
            document.getElementById('current-stock').value = '';
            document.getElementById('threshold').value = '';
            document.getElementById('unit').value = '';
            document.getElementById('category').value = '';
            document.getElementById('expiry-date').value = '';

            // Update displays
            updateInventoryDisplay();
            updateAlertsDisplay();
            
            // Show success message
            showMessage('‚úÖ Item added successfully!');
            
            // Switch to inventory tab
            showTab('inventory');
        }

        // Update inventory display
        function updateInventoryDisplay() {
            const container = document.getElementById('inventory-list');
            
            if (items.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">No items yet. Click "Add Item" to get started!</p>';
                return;
            }

            let html = '';
            items.forEach(item => {
                const isLowStock = item.stock <= item.threshold;
                const daysSince = Math.floor((new Date() - new Date(item.lastUpdated)) / (1000 * 60 * 60 * 24));
                
                html += `
                    <div class="item-card ${isLowStock ? 'low-stock' : ''}">
                        <div class="item-header">
                            <div class="item-name">${item.name}</div>
                            <div class="stock-level">${item.stock}</div>
                        </div>
                        <div class="item-details">
                            <div class="detail">
                                <div class="detail-label">Unit</div>
                                <div class="detail-value">${item.unit}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Threshold</div>
                                <div class="detail-value">${item.threshold}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Category</div>
                                <div class="detail-value">${item.category}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Last Updated</div>
                                <div class="detail-value">${daysSince} days ago</div>
                            </div>
                        </div>
                        <div class="controls">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="changeStock(${item.id}, -1)">-</button>
                                <span>Quick Update</span>
                                <button class="quantity-btn" onclick="changeStock(${item.id}, 1)">+</button>
                            </div>
                            <button class="btn btn-small btn-danger" onclick="deleteItem(${item.id})">Delete</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Update alerts display
        function updateAlertsDisplay() {
            const container = document.getElementById('alerts-list');
            const lowStockItems = items.filter(item => item.stock <= item.threshold);
            
            if (lowStockItems.length === 0) {
                container.innerHTML = '<div class="alerts-panel"><h3>‚úÖ All items are well stocked!</h3></div>';
                return;
            }

            let html = `<div class="alerts-panel"><h3>‚ö†Ô∏è ${lowStockItems.length} items need restocking</h3>`;
            
            lowStockItems.forEach(item => {
                html += `
                    <div class="alert-item">
                        <div>
                            <strong>${item.name}</strong> - Only ${item.stock} ${item.unit} left
                            <small>(Threshold: ${item.threshold})</small>
                        </div>
                        <button class="btn btn-small" onclick="searchForDeals('${item.name}')">Find Deals</button>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // Change stock level
        function changeStock(itemId, change) {
            const item = items.find(i => i.id === itemId);
            if (item) {
                item.stock = Math.max(0, item.stock + change);
                item.lastUpdated = new Date().toISOString();
                updateInventoryDisplay();
                updateAlertsDisplay();
                
                showMessage(change > 0 ? `Added to ${item.name}` : `Used ${item.name}`);
            }
        }

        // Add new deal
        function addNewDeal() {
            console.log('Add deal button clicked!');
            
            // Get values
            const itemName = document.getElementById('deal-item-name').value.trim();
            const store = document.getElementById('deal-store').value.trim();
            const price = document.getElementById('deal-price').value;
            const originalPrice = document.getElementById('deal-original-price').value;
            const expiry = document.getElementById('deal-expiry').value;
            const description = document.getElementById('deal-description').value.trim();
            
            console.log('Deal values:', {itemName, store, price, originalPrice, expiry, description});
            
            // Simple validation
            if (!itemName) {
                showMessage('Please enter an item name!', true, 'deal-message-area');
                return;
            }
            
            if (!store) {
                showMessage('Please enter a store name!', true, 'deal-message-area');
                return;
            }
            
            if (!price || price <= 0) {
                showMessage('Please enter a valid sale price!', true, 'deal-message-area');
                return;
            }
            
            if (!originalPrice || originalPrice <= 0) {
                showMessage('Please enter a valid original price!', true, 'deal-message-area');
                return;
            }
            
            if (parseFloat(price) > parseFloat(originalPrice)) {
                showMessage('Sale price cannot be higher than original price!', true, 'deal-message-area');
                return;
            }

            // Calculate savings
            const savings = Math.round(((originalPrice - price) / originalPrice) * 100);

            // Create deal object
            const newDeal = {
                id: nextDealId++,
                itemName: itemName.toLowerCase(),
                store: store,
                price: parseFloat(price),
                originalPrice: parseFloat(originalPrice),
                savings: savings,
                expiry: expiry,
                description: description,
                dateAdded: new Date().toISOString(),
                isUserDeal: true
            };

            // Add to array
            deals.push(newDeal);
            console.log('Deal added! Total deals:', deals.length);

            // Clear form
            document.getElementById('deal-item-name').value = '';
            document.getElementById('deal-store').value = '';
            document.getElementById('deal-price').value = '';
            document.getElementById('deal-original-price').value = '';
            document.getElementById('deal-expiry').value = '';
            document.getElementById('deal-description').value = '';

            // Update displays
            updateCurrentDealsDisplay();
            
            // Show success message
            showMessage('‚úÖ Deal added successfully!', false, 'deal-message-area');
        }

        // Update current deals display
        function updateCurrentDealsDisplay() {
            const container = document.getElementById('current-deals-list');
            
            if (deals.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No deals added yet!</p>';
                return;
            }

            let html = '';
            deals.forEach(deal => {
                const isExpired = deal.expiry && new Date(deal.expiry) < new Date();
                const daysLeft = deal.expiry ? Math.ceil((new Date(deal.expiry) - new Date()) / (1000 * 60 * 60 * 24)) : null;
                
                html += `
                    <div class="deal-card user-deal ${isExpired ? 'expired' : ''}">
                        <div class="deal-badge ${isExpired ? 'expired' : ''}">${isExpired ? 'EXPIRED' : 'YOUR DEAL'}</div>
                        <div class="store-name">${deal.store}</div>
                        <div class="deal-price">
                            ${deal.price.toFixed(2)}
                            <span class="original-price">${deal.originalPrice.toFixed(2)}</span>
                        </div>
                        <div class="savings">Save ${deal.savings}%</div>
                        <p><strong>${deal.itemName}</strong></p>
                        ${deal.description ? `<p style="font-style: italic; color: #666;">${deal.description}</p>` : ''}
                        ${deal.expiry ? `<p style="font-size: 0.9em; color: ${isExpired ? '#dc3545' : daysLeft <= 3 ? '#ffc107' : '#28a745'};">
                            ${isExpired ? 'Expired' : daysLeft <= 0 ? 'Expires today!' : daysLeft === 1 ? 'Expires tomorrow' : `Expires in ${daysLeft} days`}
                        </p>` : ''}
                        <div style="margin-top: 10px;">
                            <button class="btn btn-small btn-danger" onclick="deleteDeal(${deal.id})">Delete</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Delete deal
        function deleteDeal(dealId) {
            if (confirm('Are you sure you want to delete this deal?')) {
                deals = deals.filter(deal => deal.id !== dealId);
                updateCurrentDealsDisplay();
                showMessage('Deal deleted', true, 'deal-message-area');
            }
        }

        // Delete item
        function deleteItem(itemId) {
            if (confirm('Are you sure you want to delete this item?')) {
                items = items.filter(item => item.id !== itemId);
                updateInventoryDisplay();
                updateAlertsDisplay();
                showMessage('Item deleted', true);
            }
        }

        // Show all deals
        function showAllDeals() {
            const container = document.getElementById('deals-list');
            
            if (deals.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">No deals available. Add some deals using the "Add Deal" tab!</p>';
                return;
            }

            let html = '';
            deals.forEach(deal => {
                const isExpired = deal.expiry && new Date(deal.expiry) < new Date();
                const daysLeft = deal.expiry ? Math.ceil((new Date(deal.expiry) - new Date()) / (1000 * 60 * 60 * 24)) : null;
                
                html += `
                    <div class="deal-card ${deal.isUserDeal ? 'user-deal' : ''} ${isExpired ? 'expired' : ''}">
                        ${deal.isUserDeal ? `<div class="deal-badge ${isExpired ? 'expired' : ''}">${isExpired ? 'EXPIRED' : 'YOUR DEAL'}</div>` : ''}
                        <div class="store-name">${deal.store}</div>
                        <div class="deal-price">
                            ${deal.price.toFixed(2)}
                            <span class="original-price">${deal.originalPrice.toFixed(2)}</span>
                        </div>
                        <div class="savings">Save ${deal.savings}%</div>
                        <p><strong>${deal.itemName}</strong></p>
                        ${deal.description ? `<p style="font-style: italic; color: #666;">${deal.description}</p>` : ''}
                        ${deal.expiry ? `<p style="font-size: 0.9em; color: ${isExpired ? '#dc3545' : daysLeft <= 3 ? '#ffc107' : '#28a745'};">
                            ${isExpired ? 'Expired' : daysLeft <= 0 ? 'Expires today!' : daysLeft === 1 ? 'Expires tomorrow' : `Expires in ${daysLeft} days`}
                        </p>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Find deals (updated to include user deals)
        function findDeals() {
            const searchTerm = document.getElementById('search-item').value.trim().toLowerCase();
            searchForDeals(searchTerm);
        }

        function searchForDeals(itemName) {
            if (!itemName) {
                showAllDeals();
                return;
            }

            // Switch to deals tab
            showTab('deals');
            document.getElementById('search-item').value = itemName;

            // Find user deals for this item
            const userDeals = deals.filter(deal => 
                deal.itemName.toLowerCase().includes(itemName.toLowerCase())
            );

            // Generate some sample deals to supplement user deals
            const stores = ['SuperMart', 'FreshCo', 'Metro', 'Walmart', 'No Frills', 'Loblaws'];
            let allDeals = [...userDeals];
            
            // Add sample deals if we need more
            if (allDeals.length < 3) {
                for (let i = allDeals.length; i < 3; i++) {
                    const originalPrice = (Math.random() * 10 + 5).toFixed(2);
                    const salePrice = (originalPrice * (0.7 + Math.random() * 0.2)).toFixed(2);
                    const savings = Math.round(((originalPrice - salePrice) / originalPrice) * 100);
                    
                    allDeals.push({
                        store: stores[i % stores.length],
                        price: parseFloat(salePrice),
                        originalPrice: parseFloat(originalPrice),
                        savings: savings,
                        itemName: itemName,
                        isUserDeal: false
                    });
                }
            }
            
            // Display deals
            let dealsHtml = '';
            allDeals.forEach(deal => {
                const isExpired = deal.expiry && new Date(deal.expiry) < new Date();
                const daysLeft = deal.expiry ? Math.ceil((new Date(deal.expiry) - new Date()) / (1000 * 60 * 60 * 24)) : null;
                
                dealsHtml += `
                    <div class="deal-card ${deal.isUserDeal ? 'user-deal' : ''} ${isExpired ? 'expired' : ''}">
                        ${deal.isUserDeal ? `<div class="deal-badge ${isExpired ? 'expired' : ''}">${isExpired ? 'EXPIRED' : 'YOUR DEAL'}</div>` : ''}
                        <div class="store-name">${deal.store}</div>
                        <div class="deal-price">
                            ${deal.price.toFixed(2)}
                            <span class="original-price">${deal.originalPrice.toFixed(2)}</span>
                        </div>
                        <div class="savings">Save ${deal.savings}%</div>
                        <p><strong>${deal.itemName}</strong> - ${deal.isUserDeal ? 'Your saved deal!' : 'Great deal available now!'}</p>
                        ${deal.description ? `<p style="font-style: italic; color: #666;">${deal.description}</p>` : ''}
                        ${deal.expiry ? `<p style="font-size: 0.9em; color: ${isExpired ? '#dc3545' : daysLeft <= 3 ? '#ffc107' : '#28a745'};">
                            ${isExpired ? 'Expired' : daysLeft <= 0 ? 'Expires today!' : daysLeft === 1 ? 'Expires tomorrow' : `Expires in ${daysLeft} days`}
                        </p>` : ''}
                    </div>
                `;
            });
            
            document.getElementById('deals-list').innerHTML = dealsHtml;
        }

        // Initialize with a sample item and deal for testing
        setTimeout(() => {
            items.push({
                id: nextId++,
                name: 'Sample Milk',
                stock: 1,
                threshold: 2,
                unit: 'bottles',
                category: 'dairy',
                expiry: '',
                lastUpdated: new Date().toISOString()
            });
            
            deals.push({
                id: nextDealId++,
                itemName: 'milk',
                store: 'SuperMart',
                price: 3.49,
                originalPrice: 4.99,
                savings: 30,
                expiry: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 7 days from now
                description: 'Weekly special!',
                dateAdded: new Date().toISOString(),
                isUserDeal: true
            });
            
            updateInventoryDisplay();
            updateAlertsDisplay();
            updateCurrentDealsDisplay();
        }, 500);
    </script>
</body>
</html>